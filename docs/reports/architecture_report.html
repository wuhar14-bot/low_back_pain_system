<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Low Back Pain System - Architecture Report</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Print-specific CSS for PDF generation */
        @media print {
            body {
                padding: 0;
                background: white;
            }

            .container {
                box-shadow: none;
                border-radius: 0;
            }

            /* Prevent page breaks inside these elements */
            .section,
            .info-box,
            .layer,
            .component,
            table,
            .architecture-diagram {
                page-break-inside: avoid;
                break-inside: avoid;
            }

            /* Allow page breaks in folder structure */
            .folder-structure {
                page-break-inside: auto;
                break-inside: auto;
            }

            /* Allow page breaks before sections if needed */
            .section {
                page-break-before: auto;
            }

            /* Keep table rows together */
            tr {
                page-break-inside: avoid;
                break-inside: avoid;
            }

            /* Prevent orphaned headers */
            h1, h2, h3 {
                page-break-after: avoid;
                break-after: avoid;
            }

            /* Allow page breaks in details content */
            details {
                page-break-inside: auto;
                break-inside: auto;
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 1.8em;
            color: #1e3a8a;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3b82f6;
        }

        .info-box {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .info-box h3 {
            color: #1e3a8a;
            margin-bottom: 10px;
        }

        .info-box ul {
            margin-left: 20px;
        }

        .info-box li {
            margin: 5px 0;
            color: #475569;
        }

        .architecture-diagram {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 40px;
            margin: 30px 0;
        }

        .layer {
            margin-bottom: 40px;
        }

        .layer-title {
            font-size: 1.2em;
            color: #475569;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .components {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .component {
            background: white;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
        }

        .component:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-color: #3b82f6;
        }

        .component-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .component-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
        }

        .frontend-icon { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .backend-icon { background: linear-gradient(135deg, #8b5cf6, #6d28d9); }
        .database-icon { background: linear-gradient(135deg, #10b981, #059669); }
        .service-icon { background: linear-gradient(135deg, #06b6d4, #0891b2); }

        .component-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #1e293b;
        }

        .component-info {
            margin-top: 15px;
        }

        .info-item {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .info-item:before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #3b82f6;
            font-weight: bold;
        }

        .info-label {
            font-weight: 600;
            color: #475569;
        }

        .info-value {
            color: #64748b;
            font-size: 0.95em;
        }

        .url-link {
            color: #3b82f6;
            text-decoration: none;
            word-break: break-all;
        }

        .url-link:hover {
            text-decoration: underline;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-top: 10px;
        }

        .status-live {
            background: #dcfce7;
            color: #166534;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }

        .tech-tag {
            background: #e0e7ff;
            color: #3730a3;
            padding: 5px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .arrow-down {
            text-align: center;
            color: #94a3b8;
            font-size: 2em;
            margin: 20px 0;
        }

        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .summary-table th,
        .summary-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .summary-table th {
            background: #f1f5f9;
            color: #1e293b;
            font-weight: 600;
        }

        .summary-table tr:hover {
            background: #f8fafc;
        }

        .folder-structure {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            line-height: 1.8;
        }

        .folder-structure .folder {
            color: #60a5fa;
        }

        .folder-structure .file {
            color: #a3e635;
        }

        .folder-structure .comment {
            color: #94a3b8;
        }

        .footer {
            background: #1e293b;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .footer p {
            opacity: 0.8;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .container {
                box-shadow: none;
            }
            .component:hover {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¥ Low Back Pain Data Collection System</h1>
            <p>ç³»ç»Ÿæ¶æ„æŠ¥å‘Š | System Architecture Report</p>
            <p style="margin-top: 10px; font-size: 0.9em;">ç”Ÿæˆæ—¥æœŸ: 2025-11-26 (æ›´æ–°)</p>
            <p style="margin-top: 5px; font-size: 0.85em; opacity: 0.9;">é›†æˆæ¨¡å¼: ä½œä¸ºH5æœåŠ¡é›†æˆåˆ°ä¸»ç³»ç»Ÿ | Integration Mode: H5 Service for Main System</p>
        </div>

        <div class="content">
            <!-- Integration Model -->
            <div class="section">
                <h2 class="section-title">ğŸ”— é›†æˆæ¨¡å¼è¯´æ˜</h2>
                <div class="info-box">
                    <h3>ç³»ç»Ÿå®šä½</h3>
                    <p>æœ¬ç³»ç»Ÿä½œä¸º<strong>H5æœåŠ¡</strong>é›†æˆåˆ°ä¸»ç³»ç»Ÿï¼Œä¸éœ€è¦å†…éƒ¨å·¥ä½œå®¤ç®¡ç†åŠŸèƒ½ã€‚</p>

                    <h3 style="margin-top: 20px;">å‚æ•°ä¼ é€’</h3>
                    <p>ä¸»ç³»ç»Ÿé€šè¿‡URLå‚æ•°ä¼ é€’ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
                    <ul>
                        <li><code>workspace_id</code> - å·¥ä½œå®¤ID</li>
                        <li><code>workspace_name</code> - å·¥ä½œå®¤åç§°</li>
                        <li><code>doctor_id</code> - åŒ»ç”ŸID</li>
                        <li><code>doctor_name</code> - åŒ»ç”Ÿåç§°</li>
                        <li><code>auth_token</code> - è®¤è¯ä»¤ç‰Œ</li>
                    </ul>

                    <h3 style="margin-top: 20px;">æ ¸å¿ƒæœåŠ¡</h3>
                    <ul>
                        <li>æ‚£è€…æ•°æ®æ”¶é›†è¡¨å•</li>
                        <li>OCRæ–‡æ¡£è¯†åˆ« (Tesseract)</li>
                        <li>å§¿æ€åˆ†æ (MediaPipe)</li>
                    </ul>
                </div>
            </div>

            <!-- Architecture Diagram -->
            <div class="section">
                <h2 class="section-title">ğŸ“Š ç³»ç»Ÿæ¶æ„å›¾</h2>

                <div class="architecture-diagram">
                    <!-- Frontend Layer -->
                    <div class="layer">
                        <div class="layer-title">ğŸ–¥ï¸ FRONTEND LAYER (å‰ç«¯å±‚)</div>
                        <div class="components">
                            <div class="component">
                                <div class="component-header">
                                    <div class="component-icon frontend-icon">âš›ï¸</div>
                                    <div class="component-title">React Frontend</div>
                                </div>
                                <div class="component-info">
                                    <div class="info-item">
                                        <span class="info-label">URL:</span><br>
                                        <a href="https://low-back-pain-system.onrender.com" target="_blank" class="url-link">
                                            https://low-back-pain-system.onrender.com
                                        </a>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">éƒ¨ç½²å¹³å°:</span>
                                        <span class="info-value">Render (Static Site)</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">æ„å»ºå·¥å…·:</span>
                                        <span class="info-value">Vite</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">è®¤è¯çŠ¶æ€:</span>
                                        <span class="info-value">ä¸´æ—¶ç¦ç”¨ (VITE_DISABLE_AUTH=true)</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">é›†æˆæ–¹å¼:</span>
                                        <span class="info-value">é€šè¿‡URLå‚æ•°æ¥æ”¶ä¸»ç³»ç»Ÿä¿¡æ¯</span>
                                    </div>
                                </div>
                                <div class="tech-stack">
                                    <span class="tech-tag">React 18</span>
                                    <span class="tech-tag">Vite</span>
                                    <span class="tech-tag">Shadcn/ui</span>
                                    <span class="tech-tag">Tailwind CSS</span>
                                </div>
                                <span class="status-badge status-live">âœ… Live</span>
                            </div>
                        </div>
                    </div>

                    <!-- Backend Layer -->
                    <div class="layer">
                        <div class="layer-title">âš™ï¸ BACKEND LAYER (åç«¯å±‚)</div>
                        <div class="components">
                            <div class="component">
                                <div class="component-header">
                                    <div class="component-icon backend-icon">ğŸ”·</div>
                                    <div class="component-title">.NET Backend API</div>
                                </div>
                                <div class="component-info">
                                    <div class="info-item">
                                        <span class="info-label">URL:</span><br>
                                        <a href="https://low-back-pain-backend.onrender.com" target="_blank" class="url-link">
                                            https://low-back-pain-backend.onrender.com
                                        </a>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Swagger API:</span><br>
                                        <a href="https://low-back-pain-backend.onrender.com/swagger" target="_blank" class="url-link">
                                            /swagger
                                        </a>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">éƒ¨ç½²å¹³å°:</span>
                                        <span class="info-value">Render (Web Service - Docker)</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">æ¡†æ¶ç‰ˆæœ¬:</span>
                                        <span class="info-value">ASP.NET Core 7.0 + ABP vNext 7.3</span>
                                    </div>
                                </div>
                                <div class="tech-stack">
                                    <span class="tech-tag">ASP.NET Core 7.0</span>
                                    <span class="tech-tag">ABP vNext 7.3</span>
                                    <span class="tech-tag">Entity Framework</span>
                                </div>
                                <span class="status-badge status-live">âœ… Live</span>
                            </div>
                        </div>
                    </div>

                    <!-- Database Layer -->
                    <div class="layer">
                        <div class="layer-title">ğŸ’¾ DATABASE LAYER (æ•°æ®åº“å±‚)</div>
                        <div class="components">
                            <div class="component">
                                <div class="component-header">
                                    <div class="component-icon database-icon">ğŸ˜</div>
                                    <div class="component-title">PostgreSQL Database</div>
                                </div>
                                <div class="component-info">
                                    <div class="info-item">
                                        <span class="info-label">éƒ¨ç½²å¹³å°:</span>
                                        <span class="info-value">Render (PostgreSQL Service)</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">æ•°æ®åº“å:</span>
                                        <span class="info-value">LowBackPainDB</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">ç”¨é€”:</span>
                                        <span class="info-value">æ‚£è€…æ•°æ®ã€åŒ»ç–—è®°å½•</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">å¤‡ä»½:</span>
                                        <span class="info-value">è‡ªåŠ¨å¤‡ä»½ (Render)</span>
                                    </div>
                                </div>
                                <div class="tech-stack">
                                    <span class="tech-tag">PostgreSQL 15</span>
                                    <span class="tech-tag">Relational DB</span>
                                </div>
                                <span class="status-badge status-live">âœ… Live</span>
                            </div>
                        </div>
                    </div>

                    <!-- Python Services Layer -->
                    <div class="layer">
                        <div class="layer-title">ğŸ”§ PYTHON SERVICES LAYER (PythonæœåŠ¡å±‚)</div>
                        <div class="components">
                            <div class="component">
                                <div class="component-header">
                                    <div class="component-icon service-icon">ğŸ“</div>
                                    <div class="component-title">OCR Service</div>
                                </div>
                                <div class="component-info">
                                    <div class="info-item">
                                        <span class="info-label">URL:</span><br>
                                        <a href="https://lowbackpain-ocr-service.onrender.com" target="_blank" class="url-link">
                                            https://lowbackpain-ocr-service.onrender.com
                                        </a>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">å¥åº·æ£€æŸ¥:</span><br>
                                        <a href="https://lowbackpain-ocr-service.onrender.com/health" target="_blank" class="url-link">
                                            /health
                                        </a>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">OCRå¼•æ“:</span>
                                        <span class="info-value">Tesseract 5.5.0</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">æ”¯æŒè¯­è¨€:</span>
                                        <span class="info-value">ç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡ã€è‹±æ–‡</span>
                                    </div>
                                </div>
                                <div class="tech-stack">
                                    <span class="tech-tag">Python 3.10</span>
                                    <span class="tech-tag">Flask</span>
                                    <span class="tech-tag">Tesseract OCR</span>
                                    <span class="tech-tag">OpenCV</span>
                                </div>
                                <span class="status-badge status-live">âœ… Live</span>
                            </div>

                            <div class="component">
                                <div class="component-header">
                                    <div class="component-icon service-icon">ğŸ¤¸</div>
                                    <div class="component-title">MediaPipe Service</div>
                                </div>
                                <div class="component-info">
                                    <div class="info-item">
                                        <span class="info-label">URL:</span><br>
                                        <a href="https://lowbackpain-mediapipe-service.onrender.com" target="_blank" class="url-link">
                                            https://lowbackpain-mediapipe-service.onrender.com
                                        </a>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">å¥åº·æ£€æŸ¥:</span><br>
                                        <a href="https://lowbackpain-mediapipe-service.onrender.com/health" target="_blank" class="url-link">
                                            /health
                                        </a>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">æ¨¡å‹:</span>
                                        <span class="info-value">MediaPipe Pose (Complexity 2)</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">å…³é”®ç‚¹:</span>
                                        <span class="info-value">33ä¸ªäººä½“å§¿æ€å…³é”®ç‚¹</span>
                                    </div>
                                </div>
                                <div class="tech-stack">
                                    <span class="tech-tag">Python 3.10</span>
                                    <span class="tech-tag">Flask</span>
                                    <span class="tech-tag">MediaPipe 0.10.18</span>
                                    <span class="tech-tag">OpenCV</span>
                                </div>
                                <span class="status-badge status-live">âœ… Live</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Repository Structure -->
            <div class="section">
                <h2 class="section-title">ğŸ“‚ GitHubä»“åº“ç»“æ„
                    <a href="https://github.com/HarwuSherlock/low-back-pain-system" target="_blank" style="font-size: 0.6em; margin-left: 15px; color: #3b82f6; text-decoration: none;">
                        ğŸ”— github.com/HarwuSherlock/low-back-pain-system
                    </a>
                </h2>

                <div class="info-box" style="margin-bottom: 30px;">
                    <h3>ä¸»è¦ç›®å½•è¯´æ˜</h3>
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th style="width: 30%;">ç›®å½•/æ–‡ä»¶</th>
                                <th style="width: 15%;">ç±»å‹</th>
                                <th>è¯´æ˜</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>backend-dotnet/</strong></td>
                                <td><span class="status-badge" style="background: #dbeafe; color: #1e40af;">åç«¯</span></td>
                                <td>ASP.NET Core 7.0 + ABP vNext 7.3 åç«¯æœåŠ¡ï¼ŒåŒ…å«RESTful APIå’ŒPostgreSQLæ•°æ®è®¿é—®</td>
                            </tr>
                            <tr>
                                <td><strong>python-services/</strong></td>
                                <td><span class="status-badge" style="background: #fef3c7; color: #92400e;">PythonæœåŠ¡</span></td>
                                <td>OCRæœåŠ¡(Tesseract)å’ŒMediaPipeå§¿æ€åˆ†ææœåŠ¡</td>
                            </tr>
                            <tr>
                                <td><strong>src/</strong></td>
                                <td><span class="status-badge" style="background: #d1fae5; color: #065f46;">å‰ç«¯</span></td>
                                <td>React + Viteå‰ç«¯åº”ç”¨æºä»£ç ï¼ŒåŒ…å«é¡µé¢ã€ç»„ä»¶å’Œä¸Šä¸‹æ–‡</td>
                            </tr>
                            <tr>
                                <td><strong>docs/</strong></td>
                                <td><span class="status-badge" style="background: #e9d5ff; color: #6b21a8;">æ–‡æ¡£</span></td>
                                <td>ç³»ç»Ÿæ–‡æ¡£å’Œç”Ÿæˆçš„æŠ¥å‘Š(architecture_report.htmlç­‰)</td>
                            </tr>
                            <tr>
                                <td><strong>scripts/</strong></td>
                                <td><span class="status-badge" style="background: #fecaca; color: #991b1b;">è„šæœ¬</span></td>
                                <td>æ•°æ®ç”Ÿæˆã€æµ‹è¯•å’ŒPDFç”Ÿæˆè„šæœ¬</td>
                            </tr>
                            <tr>
                                <td><strong>_archive/</strong></td>
                                <td><span class="status-badge" style="background: #f3f4f6; color: #374151;">å½’æ¡£</span></td>
                                <td>å†å²ç‰ˆæœ¬ä»£ç å’Œæµ‹è¯•æ•°æ®å½’æ¡£</td>
                            </tr>
                            <tr>
                                <td><strong>.specify/</strong></td>
                                <td><span class="status-badge" style="background: #f3f4f6; color: #374151;">æ–‡æ¡£</span></td>
                                <td>é¡¹ç›®è§„æ ¼æ–‡æ¡£(19ä¸ªMDæ–‡ä»¶)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <details>
                    <summary style="font-size: 1.1em; font-weight: 600; color: #1e40af; cursor: pointer; margin-bottom: 15px;">
                        ğŸ“‹ æŸ¥çœ‹å®Œæ•´æ–‡ä»¶æ ‘ç»“æ„
                    </summary>
                    <div class="folder-structure">
low-back-pain-system/
â”œâ”€â”€ <span class="folder">.git/</span>
â”œâ”€â”€ <span class="folder">.specify/</span>                      <span class="comment"># é¡¹ç›®æ–‡æ¡£ (19ä¸ªMDæ–‡ä»¶)</span>
â”œâ”€â”€ <span class="folder">_archive/</span>                      <span class="comment"># å½’æ¡£æ–‡ä»¶å¤¹</span>
â”‚   â”œâ”€â”€ <span class="folder">demo/</span>
â”‚   â”œâ”€â”€ <span class="folder">old-backend/</span>
â”‚   â”œâ”€â”€ <span class="folder">old-docs/</span>
â”‚   â”œâ”€â”€ <span class="folder">old-frontend/</span>
â”‚   â”œâ”€â”€ <span class="folder">old-scripts/</span>
â”‚   â”œâ”€â”€ <span class="folder">reference-materials/</span>
â”‚   â””â”€â”€ <span class="folder">test-data/</span>                 <span class="comment"># æµ‹è¯•æ•°æ®å½’æ¡£ (NEW)</span>
â”‚       â”œâ”€â”€ <span class="folder">images/test_images/</span>    <span class="comment"># 6ä¸ªæµ‹è¯•å›¾ç‰‡</span>
â”‚       â””â”€â”€ <span class="folder">temp/</span>                  <span class="comment"># ä¸´æ—¶æµ‹è¯•æ–‡ä»¶</span>
â”œâ”€â”€ <span class="folder">backend-dotnet/</span>                <span class="comment"># .NETåç«¯</span>
â”‚   â”œâ”€â”€ <span class="folder">aspnet-core/</span>
â”‚   â”œâ”€â”€ <span class="file">Dockerfile</span>
â”‚   â””â”€â”€ <span class="file">README.md</span>
â”œâ”€â”€ <span class="folder">docs/</span>                          <span class="comment"># æ–‡æ¡£</span>
â”‚   â”œâ”€â”€ <span class="folder">architecture/</span>
â”‚   â”œâ”€â”€ <span class="folder">reports/</span>                   <span class="comment"># ç”Ÿæˆçš„æŠ¥å‘Š (NEW)</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">architecture_report.html</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">status-report.html</span>
â”‚   â”‚   â””â”€â”€ <span class="file">swagger-ui-screenshot.png</span>
â”‚   â””â”€â”€ <span class="file">README.md</span>
â”œâ”€â”€ <span class="folder">python-services/</span>               <span class="comment"># PythonæœåŠ¡ (OCR & MediaPipe)</span>
â”‚   â”œâ”€â”€ <span class="folder">mediapipe-service/</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">Dockerfile</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">pose_service.py</span>
â”‚   â”‚   â””â”€â”€ <span class="file">requirements_pose.txt</span>
â”‚   â””â”€â”€ <span class="folder">ocr-service/</span>
â”‚       â”œâ”€â”€ <span class="file">Dockerfile</span>
â”‚       â”œâ”€â”€ <span class="file">ocr_service.py</span>
â”‚       â””â”€â”€ <span class="file">requirements_ocr.txt</span>
â”œâ”€â”€ <span class="folder">reference/</span>                     <span class="comment"># å‚è€ƒPDF</span>
â”œâ”€â”€ <span class="folder">scripts/</span>                       <span class="comment"># å·¥å…·è„šæœ¬</span>
â”‚   â”œâ”€â”€ <span class="folder">data-generation/</span>
â”‚   â”œâ”€â”€ <span class="folder">setup/</span>
â”‚   â””â”€â”€ <span class="folder">testing/</span>                   <span class="comment"># æµ‹è¯•è„šæœ¬ (REORGANIZED)</span>
â”‚       â”œâ”€â”€ <span class="folder">backend/</span>               <span class="comment"># åç«¯æµ‹è¯•</span>
â”‚       â”‚   â”œâ”€â”€ <span class="file">test-db.ps1</span>
â”‚       â”‚   â””â”€â”€ <span class="file">test-postgres-passwords.ps1</span>
â”‚       â”œâ”€â”€ <span class="folder">frontend/</span>              <span class="comment"># å‰ç«¯æµ‹è¯•</span>
â”‚       â”‚   â”œâ”€â”€ <span class="file">capture-swagger.js</span>
â”‚       â”‚   â””â”€â”€ <span class="file">test-system.cjs</span>
â”‚       â””â”€â”€ <span class="file">test_mediapipe.py</span>
â”œâ”€â”€ <span class="folder">src/</span>                           <span class="comment"># å‰ç«¯æºä»£ç </span>
â”‚   â”œâ”€â”€ <span class="folder">api/</span>
â”‚   â”œâ”€â”€ <span class="folder">components/</span>
â”‚   â”œâ”€â”€ <span class="folder">contexts/</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">AuthContext.jsx</span>        <span class="comment"># è®¤è¯ä¸Šä¸‹æ–‡</span>
â”‚   â”‚   â””â”€â”€ <span class="file">ExternalContext.jsx</span>    <span class="comment"># å¤–éƒ¨å‚æ•°ä¸Šä¸‹æ–‡</span>
â”‚   â”œâ”€â”€ <span class="folder">pages/</span>
â”‚   â””â”€â”€ <span class="file">App.jsx</span>
â”‚
â””â”€â”€ <span class="comment"># é…ç½®æ–‡ä»¶ (16ä¸ª)</span>
    â”œâ”€â”€ <span class="file">.env.development</span>
    â”œâ”€â”€ <span class="file">.env.local</span>
    â”œâ”€â”€ <span class="file">.env.production</span>
    â”œâ”€â”€ <span class="file">.gitignore</span>
    â”œâ”€â”€ <span class="file">package.json</span>
    â”œâ”€â”€ <span class="file">vite.config.js</span>
    â””â”€â”€ <span class="file">...</span>
                    </div>
                </details>
            </div>

            <!-- Summary Table -->
            <div class="section">
                <h2 class="section-title">ğŸ“‹ ç»„ä»¶æ±‡æ€»è¡¨</h2>
                <table class="summary-table">
                    <thead>
                        <tr>
                            <th>ç»„ä»¶</th>
                            <th>ç±»å‹</th>
                            <th>å¹³å°</th>
                            <th>çŠ¶æ€</th>
                            <th>URL</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>React Frontend</strong></td>
                            <td>å‰ç«¯åº”ç”¨</td>
                            <td>Render Static Site</td>
                            <td><span class="status-badge status-live">è¿è¡Œä¸­</span></td>
                            <td><a href="https://low-back-pain-system.onrender.com" target="_blank" class="url-link">é“¾æ¥</a></td>
                        </tr>
                        <tr>
                            <td><strong>.NET Backend</strong></td>
                            <td>RESTful API</td>
                            <td>Render Web Service</td>
                            <td><span class="status-badge status-live">è¿è¡Œä¸­</span></td>
                            <td><a href="https://low-back-pain-backend.onrender.com" target="_blank" class="url-link">é“¾æ¥</a></td>
                        </tr>
                        <tr>
                            <td><strong>PostgreSQL</strong></td>
                            <td>å…³ç³»å‹æ•°æ®åº“</td>
                            <td>Render PostgreSQL</td>
                            <td><span class="status-badge status-live">è¿è¡Œä¸­</span></td>
                            <td>å†…éƒ¨è¿æ¥</td>
                        </tr>
                        <tr>
                            <td><strong>OCR Service</strong></td>
                            <td>PythonæœåŠ¡</td>
                            <td>Render Web Service</td>
                            <td><span class="status-badge status-live">è¿è¡Œä¸­</span></td>
                            <td><a href="https://lowbackpain-ocr-service.onrender.com" target="_blank" class="url-link">é“¾æ¥</a></td>
                        </tr>
                        <tr>
                            <td><strong>MediaPipe Service</strong></td>
                            <td>PythonæœåŠ¡</td>
                            <td>Render Web Service</td>
                            <td><span class="status-badge status-live">è¿è¡Œä¸­</span></td>
                            <td><a href="https://lowbackpain-mediapipe-service.onrender.com" target="_blank" class="url-link">é“¾æ¥</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Technical Stack -->
            <div class="section">
                <h2 class="section-title">ğŸ› ï¸ æŠ€æœ¯æ ˆæ€»è§ˆ</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="component">
                        <h3 style="color: #1e293b; margin-bottom: 15px;">å‰ç«¯æŠ€æœ¯</h3>
                        <div class="tech-stack">
                            <span class="tech-tag">React 18</span>
                            <span class="tech-tag">Vite</span>
                            <span class="tech-tag">React Router</span>
                            <span class="tech-tag">Tailwind CSS</span>
                            <span class="tech-tag">Shadcn/ui</span>
                            <span class="tech-tag">Lucide Icons</span>
                        </div>
                    </div>

                    <div class="component">
                        <h3 style="color: #1e293b; margin-bottom: 15px;">åç«¯æŠ€æœ¯</h3>
                        <div class="tech-stack">
                            <span class="tech-tag">ASP.NET Core 7.0</span>
                            <span class="tech-tag">ABP vNext 7.3</span>
                            <span class="tech-tag">Entity Framework</span>
                            <span class="tech-tag">AutoMapper</span>
                            <span class="tech-tag">Swagger/OpenAPI</span>
                        </div>
                    </div>

                    <div class="component">
                        <h3 style="color: #1e293b; margin-bottom: 15px;">AI/MLæœåŠ¡</h3>
                        <div class="tech-stack">
                            <span class="tech-tag">Python 3.10</span>
                            <span class="tech-tag">Flask</span>
                            <span class="tech-tag">Tesseract OCR</span>
                            <span class="tech-tag">MediaPipe</span>
                            <span class="tech-tag">OpenCV</span>
                            <span class="tech-tag">NumPy</span>
                        </div>
                    </div>

                    <div class="component">
                        <h3 style="color: #1e293b; margin-bottom: 15px;">åŸºç¡€è®¾æ–½</h3>
                        <div class="tech-stack">
                            <span class="tech-tag">Docker</span>
                            <span class="tech-tag">PostgreSQL 15</span>
                            <span class="tech-tag">Render Cloud</span>
                            <span class="tech-tag">GitHub</span>
                            <span class="tech-tag">Git</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Deployment Notes -->
            <div class="section">
                <h2 class="section-title">ğŸ“ éƒ¨ç½²è¯´æ˜</h2>
                <div class="component">
                    <h3 style="color: #1e293b; margin-bottom: 15px;">å½“å‰éƒ¨ç½²çŠ¶æ€</h3>
                    <div class="info-item">
                        <span class="info-label">éƒ¨ç½²å¹³å°:</span>
                        <span class="info-value">Render (å…è´¹å±‚ Free Tier)</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">å®¹å™¨åŒ–:</span>
                        <span class="info-value">åç«¯å’ŒPythonæœåŠ¡ä½¿ç”¨Dockeréƒ¨ç½²</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">è‡ªåŠ¨éƒ¨ç½²:</span>
                        <span class="info-value">é€šè¿‡GitHubè‡ªåŠ¨è§¦å‘éƒ¨ç½²</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">é™åˆ¶:</span>
                        <span class="info-value">512MB RAM, æ— GPU, é—²ç½®15åˆ†é’Ÿåä¼‘çœ </span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">ä¼˜åŒ–:</span>
                        <span class="info-value">ä½¿ç”¨Tesseractæ›¿ä»£PaddleOCR (CPUå…¼å®¹), MediaPipeä½¿ç”¨è½»é‡æ¨¡å‹</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">è®¤è¯:</span>
                        <span class="info-value">ä¸´æ—¶ç¦ç”¨ (VITE_DISABLE_AUTH=true) ç”¨äºæµ‹è¯•</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">é›†æˆæ–¹å¼:</span>
                        <span class="info-value">æ¥æ”¶ä¸»ç³»ç»ŸURLå‚æ•° (workspace_id, doctor_idç­‰)</span>
                    </div>
                </div>
            </div>

            <!-- Render Platform and Migration -->
            <div class="section">
                <h2 class="section-title">â˜ï¸ å…³äºRenderå¹³å°åŠåç»­è¿ç§»æ–¹æ¡ˆ</h2>

                <div class="info-box">
                    <h3>Renderå¹³å°ä»‹ç»</h3>
                    <div class="info-item">
                        <span class="info-label">å¹³å°å®šä½:</span>
                        <span class="info-value">ç°ä»£åŒ–äº‘éƒ¨ç½²å¹³å°ï¼Œç±»ä¼¼Herokuï¼Œæä¾›ç®€åŒ–çš„éƒ¨ç½²æµç¨‹</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">é€‰æ‹©åŸå› :</span>
                        <span class="info-value">å¿«é€Ÿéƒ¨ç½²ã€å…è´¹å±‚å¯ç”¨ã€è‡ªåŠ¨CI/CDã€åŸç”Ÿæ”¯æŒDockerã€GitHubé›†æˆ</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">å½“å‰é™åˆ¶:</span>
                        <span class="info-value">å…è´¹å±‚é…ç½®(512MB RAM)ã€é—²ç½®15åˆ†é’Ÿåä¼‘çœ ã€æ— GPUæ”¯æŒ</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">é€‚ç”¨åœºæ™¯:</span>
                        <span class="info-value">å¼€å‘æµ‹è¯•ç¯å¢ƒã€åŸå‹éªŒè¯ã€å°è§„æ¨¡åº”ç”¨</span>
                    </div>
                </div>

                <div class="component">
                    <h3 style="color: #1e293b; margin-bottom: 15px;">è¿ç§»åˆ°ç”Ÿäº§ç¯å¢ƒçš„æ–¹æ¡ˆ</h3>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #3b82f6; margin-bottom: 10px;">æ–¹æ¡ˆ1: è¿ç§»åˆ°é˜¿é‡Œäº‘</h4>
                        <div class="info-item">
                            <span class="info-label">éƒ¨ç½²æ–¹å¼:</span>
                            <span class="info-value">é˜¿é‡Œäº‘ECS + Dockerå®¹å™¨éƒ¨ç½²</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">æ•°æ®åº“:</span>
                            <span class="info-value">PostgreSQLè¿ç§»åˆ°é˜¿é‡Œäº‘RDS (æ‰˜ç®¡æ•°æ®åº“æœåŠ¡)</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ä¼˜åŠ¿:</span>
                            <span class="info-value">å›½å†…è®¿é—®é€Ÿåº¦å¿«ã€ç¨³å®šæ€§é«˜ã€å¯é…ç½®æ›´é«˜è§„æ ¼ã€å¯é€‰GPUå®ä¾‹(å¦‚éœ€è¦)</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">æˆæœ¬ä¼°ç®—:</span>
                            <span class="info-value">åŸºç¡€é…ç½®çº¦Â¥200-500/æœˆ (2æ ¸4G ECS + RDSåŸºç¡€ç‰ˆ)</span>
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #3b82f6; margin-bottom: 10px;">æ–¹æ¡ˆ2: é›†æˆåˆ°ç°æœ‰PMSç³»ç»Ÿ</h4>
                        <div class="info-item">
                            <span class="info-label">å‰ç«¯é›†æˆ:</span>
                            <span class="info-value">H5ç•Œé¢é€šè¿‡WebViewåµŒå…¥åˆ°PMSç³»ç»Ÿ</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">åç«¯æ•´åˆ:</span>
                            <span class="info-value">.NETåç«¯APIå¯åˆå¹¶åˆ°PMSåç«¯æœåŠ¡</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">æ•°æ®åº“:</span>
                            <span class="info-value">PostgreSQLå¯åˆå¹¶åˆ°PMSæ•°æ®åº“æˆ–ç‹¬ç«‹éƒ¨ç½²</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">PythonæœåŠ¡:</span>
                            <span class="info-value">OCRå’ŒMediaPipeæœåŠ¡ä¿æŒç‹¬ç«‹éƒ¨ç½²(æ¨èé˜¿é‡Œäº‘å‡½æ•°è®¡ç®—)</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ä¼˜åŠ¿:</span>
                            <span class="info-value">ç»Ÿä¸€ç®¡ç†ã€å‡å°‘ç»´æŠ¤æˆæœ¬ã€å…±äº«ç”¨æˆ·è®¤è¯ä½“ç³»</span>
                        </div>
                    </div>

                    <div class="info-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                        <h4 style="color: #92400e; margin-bottom: 10px;">ğŸ“Œ æ¨èè¿ç§»è·¯å¾„</h4>
                        <ul style="margin-left: 20px; color: #78350f;">
                            <li><strong>çŸ­æœŸ (1-2å‘¨):</strong> ä¿æŒRenderéƒ¨ç½²ï¼Œç”¨äºå¼€å‘æµ‹è¯•å’ŒåŠŸèƒ½éªŒè¯</li>
                            <li><strong>ä¸­æœŸ (1-2æœˆ):</strong> è¿ç§»åˆ°é˜¿é‡Œäº‘è¿›è¡Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å’Œæ€§èƒ½æµ‹è¯•</li>
                            <li><strong>é•¿æœŸ (3-6æœˆ):</strong> æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µå†³å®šæ˜¯å¦å®Œå…¨é›†æˆåˆ°PMSç³»ç»Ÿ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>Low Back Pain Data Collection System</strong></p>
            <p>Department of Orthopaedics & Traumatology</p>
            <p>The University of Hong Kong</p>
            <p style="margin-top: 15px; font-size: 0.9em;">Generated: 2025-11-26 | Architecture Report v2.0 (Updated)</p>
        </div>
    </div>
</body>
</html>
