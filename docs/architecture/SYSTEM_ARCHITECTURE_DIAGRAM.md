# 系统架构图 - Low Back Pain System

**University of Hong Kong - Department of Orthopaedics & Traumatology**

**Last Updated:** 2025-10-24

---

## 完整系统架构图

```
┌─────────────────────────────────────────────────────────────────────┐
│                          客户端层 (Client Layer)                     │
│                                                                       │
│  ┌──────────────────────────┐      ┌──────────────────────────┐   │
│  │     PC 浏览器             │      │     手机浏览器            │   │
│  │                          │      │                          │   │
│  │  Chrome / Edge / Safari  │      │  Chrome / Safari         │   │
│  │  http://localhost:5173   │      │  http://172.20.10.4:5173│   │
│  │                          │      │                          │   │
│  │  - 填写患者信息          │      │  - 拍摄患者照片          │   │
│  │  - OCR识别表单           │      │  - 上传姿态照片          │   │
│  │  - 查看分析结果          │      │  - 实时同步数据          │   │
│  └────────────┬─────────────┘      └────────────┬─────────────┘   │
│               │                                  │                  │
└───────────────┼──────────────────────────────────┼──────────────────┘
                │                                  │
                │       HTTP/HTTPS                 │
                └───────────────┬──────────────────┘
                                │
┌───────────────────────────────▼──────────────────────────────────────┐
│                       前端层 (Frontend Layer)                         │
│                         Port: 5173 (Vite)                             │
│  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│  ┃   React 18 应用 (Single Page Application)                     ┃  │
│  ┃                                                                ┃  │
│  ┃   ┌────────────────────┐     ┌────────────────────┐          ┃  │
│  ┃   │  页面 (Pages)      │     │ 组件 (Components)   │          ┃  │
│  ┃   │  ─────────────     │     │  ──────────────────│          ┃  │
│  ┃   │  • Dashboard.jsx   │     │  • PatientForm/    │          ┃  │
│  ┃   │  • PatientForm.jsx │     │    - BasicInfoSection        │          ┃  │
│  ┃   │  • PatientDetail   │     │    - MedicalHistory │          ┃  │
│  ┃   │                    │     │    - SubjectiveExam │          ┃  │
│  ┃   │                    │     │    - ObjectiveExam  │          ┃  │
│  ┃   │                    │     │    - PainAreaSection│          ┃  │
│  ┃   │                    │     │  • PostureAnalysis  │          ┃  │
│  ┃   │                    │     │    Modal            │          ┃  │
│  ┃   └────────────────────┘     └────────────────────┘          ┃  │
│  ┃                                                                ┃  │
│  ┃   ┌────────────────────────────────────────────────┐          ┃  │
│  ┃   │  API 客户端 (src/api/)                         │          ┃  │
│  ┃   │  ──────────────────────────────────────────────│          ┃  │
│  ┃   │  • integrations.js  - OCR/AI API调用           │          ┃  │
│  ┃   │  • entities.js      - 数据库CRUD操作           │          ┃  │
│  ┃   └────────────────────────────────────────────────┘          ┃  │
│  ┃                                                                ┃  │
│  ┃   技术栈: React + Vite + TailwindCSS + shadcn/ui              ┃  │
│  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
└───────────┬────────────────┬─────────────────┬────────────────────────┘
            │                │                 │
            │ HTTP           │ HTTP            │ HTTP
            │ POST           │ POST            │ GET/POST/PUT/DELETE
            │                │                 │
┌───────────▼──────┐  ┌──────▼────────┐  ┌────▼──────────────────────────┐
│   OCR Service    │  │ Pose Service  │  │    Database Service           │
│   Port: 5001     │  │ Port: 5002    │  │    Port: 5003                 │
│  ┌──────────────┐│  │┌─────────────┐│  │  ┌──────────────────────────┐ │
│  │ Flask API    ││  ││ Flask API   ││  │  │ Flask REST API           │ │
│  │              ││  ││             ││  │  │                          │ │
│  │ Endpoints:   ││  ││ Endpoints:  ││  │  │ Endpoints:               │ │
│  │ /health      ││  ││ /health     ││  │  │ GET    /patients         │ │
│  │ /ocr/process ││  ││ /pose/      ││  │  │ GET    /patients/:id     │ │
│  │ /ocr/batch   ││  ││  analyze-   ││  │  │ POST   /patients         │ │
│  │              ││  ││  static     ││  │  │ PUT    /patients/:id     │ │
│  └──────┬───────┘│  │└──────┬──────┘│  │  │ DELETE /patients/:id     │ │
│         │        │  │       │       │  │  └───────────┬──────────────┘ │
│         ▼        │  │       ▼       │  │              │                │
│  ┌──────────────┐│  │┌─────────────┐│  │              ▼                │
│  │  PaddleOCR   ││  ││  MediaPipe  ││  │  ┌──────────────────────────┐ │
│  │              ││  ││   Pose      ││  │  │   SQLite3 引擎           │ │
│  │ • 中英文识别 ││  ││             ││  │  │                          │ │
│  │ • GPU加速    ││  ││ • 33个关键点││  │  │ • CRUD 操作              │ │
│  │ • 字段提取   ││  ││ • ROM计算   ││  │  │ • 事务管理               │ │
│  │ • 2-5秒处理  ││  ││ • 代偿检测  ││  │  │ • JSON查询               │ │
│  │              ││  ││ • <2秒处理  ││  │  └───────────┬──────────────┘ │
│  └──────────────┘│  │└─────────────┘│  │              │                │
│                  │  │               │  │              ▼                │
│  技术:           │  │  技术:        │  │  ┌──────────────────────────┐ │
│  Python 3.12     │  │  Python 3.12  │  │  │  low_back_pain.db        │ │
│  Flask           │  │  Flask        │  │  │  (SQLite 数据库文件)     │ │
│  PaddlePaddle    │  │  MediaPipe    │  │  │                          │ │
│  CUDA (可选)     │  │  OpenCV       │  │  │  ┌────────────────────┐  │ │
└──────────────────┘  └───────────────┘  │  │  │ patients 表        │  │ │
                                          │  │  │ ─────────────────  │  │ │
                                          │  │  │ • id (主键)        │  │ │
                                          │  │  │ • study_id         │  │ │
                                          │  │  │ • name, age, gender│  │ │
                                          │  │  │ • medical_history  │  │ │
                                          │  │  │ • subjective_exam  │  │ │
                                          │  │  │ • objective_exam   │  │ │
                                          │  │  │ • ai_posture_...   │  │ │
                                          │  │  │ • data_json        │  │ │
                                          │  │  └────────────────────┘  │ │
                                          │  │                          │ │
                                          │  │  大小: ~12 KB (当前)     │ │
                                          │  │  类型: 单文件数据库       │ │
                                          │  └──────────────────────────┘ │
                                          │                                │
                                          │  技术:                         │
                                          │  Python 3.12                   │
                                          │  Flask                         │
                                          │  SQLite3                       │
                                          └────────────────────────────────┘
```

---

## 数据流向图

### 场景1: OCR识别患者信息

```
┌──────────┐      ┌──────────┐      ┌──────────┐      ┌──────────┐
│  用户    │      │  前端    │      │OCR服务   │      │ 数据库   │
│          │      │  :5173   │      │  :5001   │      │  :5003   │
└────┬─────┘      └────┬─────┘      └────┬─────┘      └────┬─────┘
     │                 │                 │                 │
     │ 1. 上传表单照片  │                 │                 │
     │────────────────>│                 │                 │
     │                 │                 │                 │
     │                 │ 2. POST /ocr/process             │
     │                 │    (图片base64) │                 │
     │                 │────────────────>│                 │
     │                 │                 │                 │
     │                 │                 │ 3. PaddleOCR    │
     │                 │                 │    识别文字     │
     │                 │                 │    (2-5秒)      │
     │                 │                 │                 │
     │                 │ 4. 返回结构化   │                 │
     │                 │    数据 (JSON)  │                 │
     │                 │<────────────────│                 │
     │                 │                 │                 │
     │ 5. 自动填充表单  │                 │                 │
     │<────────────────│                 │                 │
     │                 │                 │                 │
     │ 6. 用户完成编辑  │                 │                 │
     │ 点击"提交"       │                 │                 │
     │────────────────>│                 │                 │
     │                 │                 │                 │
     │                 │ 7. POST /patients│                │
     │                 │    (患者数据)    │                 │
     │                 │────────────────────────────────>│
     │                 │                 │                 │
     │                 │                 │                 │ 8. INSERT INTO
     │                 │                 │                 │    patients
     │                 │                 │                 │    (保存到DB)
     │                 │                 │                 │
     │                 │ 9. 返回成功      │                 │
     │                 │<────────────────────────────────│
     │                 │                 │                 │
     │ 10. 显示成功提示 │                 │                 │
     │<────────────────│                 │                 │
     │                 │                 │                 │
```

---

### 场景2: AI姿态分析

```
┌──────────┐      ┌──────────┐      ┌──────────┐      ┌──────────┐
│  用户    │      │  前端    │      │姿态服务  │      │ 数据库   │
│          │      │  :5173   │      │  :5002   │      │  :5003   │
└────┬─────┘      └────┬─────┘      └────┬─────┘      └────┬─────┘
     │                 │                 │                 │
     │ 1. 上传站立照片  │                 │                 │
     │    + 前屈照片    │                 │                 │
     │────────────────>│                 │                 │
     │                 │                 │                 │
     │                 │ 2. POST /pose/analyze-static     │
     │                 │    (2张图片)     │                 │
     │                 │────────────────>│                 │
     │                 │                 │                 │
     │                 │                 │ 3. MediaPipe    │
     │                 │                 │    识别33个关键点│
     │                 │                 │                 │
     │                 │                 │ 4. 计算:        │
     │                 │                 │    • ROM角度    │
     │                 │                 │    • 躯干角度   │
     │                 │                 │    • 骨盆倾斜   │
     │                 │                 │    • 代偿检测   │
     │                 │                 │    (<2秒)       │
     │                 │                 │                 │
     │                 │ 5. 返回分析结果 │                 │
     │                 │    + 标注图片    │                 │
     │                 │<────────────────│                 │
     │                 │                 │                 │
     │ 6. 展示分析结果  │                 │                 │
     │    • ROM: 47.4° │                 │                 │
     │    • 评估:轻度受限│                │                 │
     │    • 代偿动作    │                 │                 │
     │    • 临床建议    │                 │                 │
     │<────────────────│                 │                 │
     │                 │                 │                 │
     │ 7. 用户点击保存  │                 │                 │
     │────────────────>│                 │                 │
     │                 │                 │                 │
     │                 │ 8. PUT /patients/:id             │
     │                 │    (更新ai_posture_analysis)     │
     │                 │────────────────────────────────>│
     │                 │                 │                 │
     │                 │                 │                 │ 9. UPDATE
     │                 │                 │                 │    patients SET
     │                 │                 │                 │    ai_posture...
     │                 │                 │                 │
     │                 │ 10. 返回成功    │                 │
     │                 │<────────────────────────────────│
     │                 │                 │                 │
     │ 11. 保存成功提示 │                 │                 │
     │<────────────────│                 │                 │
     │                 │                 │                 │
```

---

### 场景3: 跨设备数据同步

```
┌──────────┐      ┌──────────┐      ┌──────────┐
│  PC浏览器│      │  前端    │      │ 数据库   │
│          │      │  :5173   │      │  :5003   │
└────┬─────┘      └────┬─────┘      └────┬─────┘
     │                 │                 │
     │ 1. 创建患者     │                 │
     │────────────────>│                 │
     │                 │                 │
     │                 │ 2. POST /patients│
     │                 │────────────────>│
     │                 │                 │
     │                 │                 │ 3. INSERT
     │                 │                 │    (患者A)
     │                 │                 │
     │                 │ 4. 返回患者ID   │
     │                 │<────────────────│
     │                 │                 │
     │ 5. 显示患者A    │                 │
     │<────────────────│                 │
     │                 │                 │
                                         │
┌──────────┐      ┌──────────┐         │
│手机浏览器│      │  前端    │         │
│          │      │  :5173   │         │
└────┬─────┘      └────┬─────┘         │
     │                 │                 │
     │                 │ 6. 轮询查询(每3秒)│
     │                 │ GET /patients   │
     │                 │────────────────>│
     │                 │                 │
     │                 │                 │ 7. SELECT *
     │                 │                 │    FROM patients
     │                 │                 │
     │                 │ 8. 返回患者列表 │
     │                 │    (包含患者A)  │
     │                 │<────────────────│
     │                 │                 │
     │ 9. 自动显示患者A│                 │
     │<────────────────│                 │
     │                 │                 │
     │ 10. 上传姿态照片│                 │
     │────────────────>│                 │
     │                 │                 │
     │                 │ 11. PUT /patients/A│
     │                 │     (更新数据)   │
     │                 │────────────────>│
     │                 │                 │
     │                 │                 │ 12. UPDATE
     │                 │                 │     patients
     │                 │                 │
                                         │
┌──────────┐      ┌──────────┐         │
│  PC浏览器│      │  前端    │         │
│          │      │  :5173   │         │
└────┬─────┘      └────┬─────┘         │
     │                 │                 │
     │                 │ 13. 轮询查询    │
     │                 │ GET /patients/A │
     │                 │────────────────>│
     │                 │                 │
     │                 │                 │ 14. SELECT
     │                 │                 │     (最新数据)
     │                 │                 │
     │                 │ 15. 返回更新数据│
     │                 │<────────────────│
     │                 │                 │
     │ 16. 自动更新界面│                 │
     │     (显示姿态照片)│                │
     │<────────────────│                 │
     │                 │                 │
```

---

## 技术栈总览

```
┌─────────────────────────────────────────────────────────────┐
│                         技术栈                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  前端 (Port 5173)                                           │
│  ├─ 框架: React 18.2                                        │
│  ├─ 构建: Vite 6.1                                          │
│  ├─ 样式: TailwindCSS 3.4 + shadcn/ui                      │
│  ├─ 路由: React Router DOM 7.2                              │
│  ├─ 状态: React Hooks (useState, useEffect)                │
│  ├─ HTTP: Fetch API                                         │
│  └─ 表单: React Hook Form + Zod                             │
│                                                             │
│  后端服务                                                    │
│  ├─ 语言: Python 3.12                                       │
│  ├─ 框架: Flask 3.0                                         │
│  └─ CORS: Flask-CORS                                        │
│                                                             │
│  OCR服务 (Port 5001)                                        │
│  ├─ PaddleOCR 2.7                                           │
│  ├─ PaddlePaddle GPU (可选)                                 │
│  └─ OpenCV                                                  │
│                                                             │
│  姿态服务 (Port 5002)                                       │
│  ├─ MediaPipe 0.10.18                                       │
│  ├─ NumPy 1.26                                              │
│  └─ OpenCV 4.9                                              │
│                                                             │
│  数据库服务 (Port 5003)                                     │
│  ├─ SQLite3 (Python内置)                                    │
│  └─ JSON处理 (Python内置)                                   │
│                                                             │
│  开发工具                                                    │
│  ├─ Git 版本控制                                            │
│  ├─ VS Code 编辑器                                          │
│  └─ Chrome DevTools 调试                                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 文件结构树

```
E:\claude-code\low back pain system\
│
├── frontend/                          # 前端源码（未使用）
│
├── src/                               # 前端源码（实际使用）
│   ├── api/
│   │   ├── integrations.js           # OCR/AI API调用
│   │   └── entities.js               # 数据库CRUD
│   │
│   ├── components/
│   │   ├── ui/                       # shadcn/ui 组件
│   │   │   ├── button.jsx
│   │   │   ├── input.jsx
│   │   │   ├── radio-group.jsx
│   │   │   └── ...
│   │   │
│   │   └── patient-form/             # 患者表单组件
│   │       ├── BasicInfoSection.jsx         (第1步: 基本信息)
│   │       ├── PainAreaSection.jsx          (第2步: 疼痛区域)
│   │       ├── MedicalHistorySection.jsx    (第3步: 病史)
│   │       ├── SubjectiveExamSection.jsx    (第4步: 主观检查)
│   │       ├── ObjectiveExamSection.jsx     (第5步: 客观检查)
│   │       ├── FunctionalScoreSection.jsx   (第6步: 功能评分)
│   │       ├── InterventionSection.jsx      (第7步: 干预措施)
│   │       └── PostureAnalysisModal.jsx     (AI姿态分析弹窗)
│   │
│   ├── pages/
│   │   ├── Dashboard.jsx             # 患者列表
│   │   ├── PatientForm.jsx           # 新增/编辑患者
│   │   └── PatientDetail.jsx         # 患者详情
│   │
│   ├── App.jsx                        # 应用主入口
│   └── main.jsx                       # React挂载点
│
├── backend/                           # 后端服务
│   ├── ocr_service.py                # OCR服务 (:5001)
│   ├── pose_service.py               # 姿态服务 (:5002)
│   ├── database_service.py           # 数据库服务 (:5003)
│   ├── low_back_pain.db              # SQLite数据库文件
│   ├── requirements_pose.txt         # Python依赖
│   └── database/
│       └── (数据库相关脚本)
│
├── docs/                              # 文档
│   ├── README.md
│   ├── START_GUIDE.md
│   ├── UI_IMPROVEMENTS_2025-10-24.md
│   ├── BACKEND_OVERVIEW.md
│   ├── DATABASE_STRUCTURE_GUIDE.md
│   └── SYSTEM_ARCHITECTURE_DIAGRAM.md (本文件)
│
├── .specify/                          # 技术规格文档
│   ├── ARCHITECTURE.md
│   ├── API.md
│   ├── DATABASE.md
│   └── DEPLOYMENT.md
│
├── start_all_services.bat            # 一键启动脚本
├── package.json                       # 前端依赖配置
├── vite.config.js                     # Vite配置
└── tailwind.config.js                 # TailwindCSS配置
```

---

## 端口分配

| 服务 | 端口 | 协议 | 用途 |
|:---|:---:|:---|:---|
| **前端** | 5173 | HTTP | React应用（Vite Dev Server） |
| **OCR服务** | 5001 | HTTP | PaddleOCR文字识别 |
| **姿态服务** | 5002 | HTTP | MediaPipe姿态分析 |
| **数据库服务** | 5003 | HTTP | SQLite REST API |

**防火墙规则：** 所有端口已配置允许入站连接（支持手机访问）

---

## 网络拓扑

### 本地开发环境

```
┌────────────────────────────────────────┐
│         开发机器 (Windows)              │
│         IP: 127.0.0.1 (localhost)      │
│                                        │
│  ┌──────────┐  ┌──────────┐           │
│  │  Chrome  │  │  VS Code │           │
│  │  Browser │  │  Editor  │           │
│  └────┬─────┘  └──────────┘           │
│       │                                │
│       │ http://localhost:5173         │
│       │                                │
│       ▼                                │
│  ┌─────────────────────┐              │
│  │   Vite Dev Server   │              │
│  │   Port 5173         │              │
│  └─────────────────────┘              │
│                                        │
│  ┌─────────────────────┐              │
│  │   Backend Services  │              │
│  │   - OCR    :5001    │              │
│  │   - Pose   :5002    │              │
│  │   - DB     :5003    │              │
│  └─────────────────────┘              │
│                                        │
│  ┌─────────────────────┐              │
│  │  low_back_pain.db   │              │
│  │  (SQLite File)      │              │
│  └─────────────────────┘              │
└────────────────────────────────────────┘
```

### 跨设备访问（手机热点）

```
┌─────────────────────────────────────────────────────┐
│              手机热点网络 (172.20.10.x)              │
│                                                     │
│  ┌──────────────────┐       ┌──────────────────┐  │
│  │   手机设备       │       │   开发机器       │  │
│  │  (iPhone/Android)│       │   (Windows)      │  │
│  │                  │       │                  │  │
│  │  172.20.10.2     │       │  172.20.10.4     │  │
│  │                  │       │                  │  │
│  │  手机浏览器      │       │  ┌────────────┐  │  │
│  │  访问:           │       │  │ Vite :5173 │  │  │
│  │  http://         │       │  ├────────────┤  │  │
│  │  172.20.10.4:5173│◄──────┼──┤ OCR  :5001 │  │  │
│  │                  │  WiFi │  ├────────────┤  │  │
│  │  📸 拍照上传     │       │  │ Pose :5002 │  │  │
│  │                  │       │  ├────────────┤  │  │
│  └──────────────────┘       │  │ DB   :5003 │  │  │
│                              │  └────────────┘  │  │
│                              └──────────────────┘  │
└─────────────────────────────────────────────────────┘

防火墙规则:
✅ Port 5173 - 允许入站 (前端访问)
✅ Port 5001 - 允许入站 (OCR服务)
✅ Port 5002 - 允许入站 (姿态服务)
✅ Port 5003 - 允许入站 (数据库服务)
```

---

## 启动流程

```
┌─────────────────────────────────────────────────────────────┐
│              启动脚本: start_all_services.bat                │
└───────────┬─────────────────────────────────────────────────┘
            │
            ├─── Terminal 1 ──► python backend/ocr_service.py
            │                   ↓
            │                   [OK] OCR Service running on :5001
            │
            ├─── Terminal 2 ──► python backend/pose_service.py
            │                   ↓
            │                   [OK] Pose Service running on :5002
            │
            ├─── Terminal 3 ──► python backend/database_service.py
            │                   ↓
            │                   [OK] Database Service running on :5003
            │
            └─── Terminal 4 ──► npm run dev
                                ↓
                                [OK] Vite running on :5173
                                ↓
                                自动打开浏览器: http://localhost:5173

┌─────────────────────────────────────────────────────────────┐
│  所有服务就绪 ✅                                             │
│  - 前端可访问                                                │
│  - OCR识别可用                                               │
│  - 姿态分析可用                                              │
│  - 数据库可读写                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 性能指标

| 操作 | 响应时间 | 说明 |
|:---|:---:|:---|
| **页面加载** | <3秒 | 首次加载前端应用 |
| **OCR识别** | 2-5秒 | 单张表单识别（GPU加速） |
| **姿态分析** | <2秒 | 2张照片分析（33个关键点） |
| **数据保存** | <100ms | 保存患者数据到数据库 |
| **数据查询** | <50ms | 查询单个患者信息 |
| **列表加载** | <200ms | 加载所有患者列表 |
| **跨设备同步** | 3秒 | 自动轮询同步间隔 |

---

## 数据安全

```
┌─────────────────────────────────────────────────────┐
│               数据安全措施                           │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ✅ 本地网络隔离                                     │
│     - 数据不离开本地网络                            │
│     - 无云服务依赖                                  │
│     - 所有处理在本地完成                            │
│                                                     │
│  ✅ 防火墙保护                                       │
│     - 仅允许必要端口入站                            │
│     - 限制访问来源                                  │
│                                                     │
│  ✅ 患者隐私                                         │
│     - 支持匿名化                                    │
│     - 姓名可用编号替代                              │
│     - 无需真实联系方式                              │
│                                                     │
│  ✅ 数据备份                                         │
│     - SQLite文件备份                                │
│     - data_json完整备份                             │
│     - 版本历史保留                                  │
│                                                     │
│  ⚠️  当前无身份验证                                  │
│     - 适用于单用户/研究环境                         │
│     - 未来可添加登录系统                            │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## 未来扩展架构

```
当前架构 (单中心)              →           未来架构 (多中心)
─────────────────────────────────────────────────────────────

┌──────────────┐                        ┌──────────────┐
│   PC浏览器   │                        │   PC浏览器   │
└──────┬───────┘                        └──────┬───────┘
       │                                       │
       ▼                                       ▼
┌──────────────┐                        ┌──────────────┐
│ Vite :5173   │                        │   Nginx      │
│ (本地)       │                        │   (反向代理) │
└──────┬───────┘                        └──────┬───────┘
       │                                       │
       ├─── OCR :5001                          ▼
       ├─── Pose :5002                  ┌──────────────┐
       └─── DB :5003                    │  React Build │
            │                           │  (静态文件)  │
            ▼                           └──────┬───────┘
      ┌──────────┐                            │
      │ SQLite   │                            ▼
      │ (本地DB) │                      ┌──────────────┐
      └──────────┘                      │ PostgreSQL   │
                                        │ (云端数据库) │
                                        └──────┬───────┘
                                               │
                                    ┌──────────┼──────────┐
                                    ▼          ▼          ▼
                              ┌────────┐ ┌────────┐ ┌────────┐
                              │ 中心1  │ │ 中心2  │ │ 中心3  │
                              │ 数据   │ │ 数据   │ │ 数据   │
                              └────────┘ └────────┘ └────────┘

触发升级条件:
- [ ] 患者数 > 5000
- [ ] 并发用户 > 10
- [ ] 需要多中心协作
- [ ] 需要云端访问
```

---

**Last Updated:** 2025-10-24 22:15
